<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
<head>
	<title>HostedPayment Test Page</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script type="text/javascript">

		$(function () {

			$("#btnOpenAuthorizeNetIFrame").click(function () {
				$("#add_payment").show();
				$("#send_token").attr({ "action": "https://test.authorize.net/payment/payment", "target": "add_payment" }).submit();
				$(window).scrollTop($('#add_payment').offset().top - 50);
			});

		});


</script>
</head>
<body>
	 
	<div>
		Open Authorize.net in an iframe to complete transactions with jquery
		<button id="btnOpenAuthorizeNetIFrame" onclick="">Show Payment Form</button>
	</div>
	<div    id="iframe_holder" class="center-block" style="width:90%;max-width: 1000px">
		<iframe id="add_payment" class="embed-responsive-item panel" name="add_payment" width="100%"    frameborder="0" scrolling="no" hidden="true">
		</iframe>
	</div>
	<form id="send_token" action="" method="post" target="add_payment" >
		<input type="hidden" name="token" value="K1O0nZgD32dz0ZFG7cIZKKVw4SpRPkYwP6WpHbpHqnp7dXEE4MapeSR+Nx2YgntbCVoHsEcGliRB3fmJVv5zNNF9sc9AGJREsu6bz3dGWCPVIfJYD3aLlGk7F+fyiCCXfOfRm2J0iUSUBxk67L/duHzDmgQjQaLWn4WENmsYOzJ+AqXD9tzMgyS22LUDmCWNZ7FH/vRFBtSZfI+mQsYiMTfQ3tlVXWqZiDqnEEKi2MeCwvLpE99nhy1aHYgPrmYaPnPiIeW1CgRQPXTnHLMzthf/S9MBafr33yqJGKdmOIxAnPDdSu7wx09fSTF3eyzOsngVO7NozagCViMAzsTdU1ggxT7IqXqos9JsEhl1WuabgF20nHdFk1Sr16NwPlUUE7Tr9oqbWgQPfsqfEBM7FYc14b8mB8hVpoGlOJp58QXT1noxUEFUCdHL8gyiUASO5uzk3oxOYaB53LW+WCN/h8CENbmKYpekRRSsO/PE4JH7n2sznKcoCbTPlLQsodXAvO3AQOddZLFuF7ABMWiYYHM5YSYcZNBE/AIfXrfYD5cY/uSq0XO3ZZi+jbxdUeEh0R3/+w9FBtO+Y6ZjzbzfdERF1SBSDW/JSRyO8ktUJ8FZQDydh9LOY7Z9Fa+5jI4VegytpL6z8HsD94W1jjWX/G0bokUUoQT69WA/o7jbxRwZUPrMHrbUqAe8SKEAeAv5/HBzAXsdyQkjwYi5Dv79b3CGy/VTrAtczXk2R2wowIIrTek64vIai+e9VF1D1pFhmjM8CazjU+CbNI49RlxkHOMcDkmMihWExX9ZkSw+MUcxbSIw/iG//9sNH3ziIHyCgOqROdUFvqOtwiAfF2rBlVnzqoyVplS3K96Bn+Hu/YuH0BB4yJ7vn2rohXOsJExDLypJ92OGBgTn/qEJuFUAyvJTeZV+VgVy88307U+0LWwQUrbCcYwt61W+eRH4Qn34je73eSM5yApNJuazPnEEk6t9Zh+cHoy9nUbvBglK4omIGaR+dRMeZnL7kw+nfWzyYHnm8xK0q/nXE35JoBj7QjPOUXLWjESU7Ub3pXAaC2TWLTkmy3ukzjviXUq1gtwcBj7WdhLGIarSIbmCHQ7LTqr5WtEckEu7t8sdqO9QJp7ZmCVwvKCLMzyJnGBkTAx128hBfDk2zopnP6QSj84YoihV5H4Yrv5zoLFrn7lm67IFUrUuxE8gkuD8abwvdoIkvFkk1gUm3CG9BMaBo/UffiQ81fCfMVZZ6HtS0aTOPneaxmowvE4/fkJMLLSyrzOIdkphqblSTPHEVg3RLj3/djiQA5pKWNaMZSn9WB8NFJRN4Z1/jgh3fE04yajiBrcsAMU12PSFfvvgmYVfrIwrjdB8nNS8GEwjV/Cyby8EFVReiOcaIUy1LqduS70VQJ7EiuVP/HcJ0lAnWTU0nBZcRHPn/0GdMNEvyKSOJ9ZHLUxxUHmQtKVVaZo4xN5jzehNbo7tQORowYmqFSQT0QBgeFD6wMImcSbh2xbE6JClX4XxobzNMOzmc2ReIcF+pdTsYdxAdlv2b5mKhe5neUTgR/yHVfmrlwIzGmB4gbibXMvmu9B2MwPtQvRX+xmTq+k/pz4wlHw879Z1r3zBT4/Ubak5thggIQNH+1VvI3Ij6VPNhPDegXwhgCdZAoo+0PX76rC7RFY5dcBEMjcw3paFM0oVQyYhwJJVBismAbhJ2wQq+xosDSbZv79VuWvvdU3wIVALTQxAX1HC0gkU7yttZGQTjZCPuiJ0FT/1sM41t+i+1SySVmx8A/FgthVUHCK3kAcdGY0OIgMORsbZO1Em2+xNCKSeSlVt38zNRCx+zH8=.4uCq92Mq" />
	</form>

	<script type="text/javascript">

		(function () {
			if (!window.AuthorizeNetIFrame) window.AuthorizeNetIFrame = {};
				AuthorizeNetIFrame.onReceiveCommunication = function (querystr) {
					var params = parseQueryString(querystr);
						switch (params["action"]) {
							case "successfulSave":
								break;
							case "cancel":
								break;
							case "resizeWindow":
								var w = parseInt(params["width"]);
								var h = parseInt(params["height"]);
								var ifrm = document.getElementById("add_payment");
								ifrm.style.width = w.toString() + "px";
								ifrm.style.height = h.toString() + "px";
								break;
							case "transactResponse":
								var ifrm = document.getElementById("add_payment");
								ifrm.style.display = 'none';
							}
					};

				function parseQueryString(str) {
					var vars = [];
					var arr = str.split('&');
					var pair;
					for (var i = 0; i < arr.length; i++) {
						pair = arr[i].split('=');
						vars.push(pair[0]);
						vars[pair[0]] = unescape(pair[1]);
						}
					return vars;
					}
		}());
	</script>
</body>
</html>
